
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Development Hub usage</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="alm-development-hub-usage"
                  title="Development Hub usage"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Tutorial - Development Hub usage" duration="0">
        <p>This lab will take you through the functionality of Development Hub and it&#39;s usage.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Create an issue" duration="0">
        <p>An Issue record must be created to begin working on a new feature or bug fix.</p>
<ol type="1">
<li>To create an Issue, Navigate to the Issues sub area under the Issues area</li>
<li>Click ‘New&#39;</li>
<li>You will then need to complete the following fields:</li>
</ol>
<table>
<tr><td colspan="1" rowspan="1"><p>Tab</p>
</td><td colspan="1" rowspan="1"><p>Field</p>
</td><td colspan="1" rowspan="1"><p>Example Value</p>
</td><td colspan="1" rowspan="1"><p>Explanation</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>General</p>
</td><td colspan="1" rowspan="1"><p>Name</p>
</td><td colspan="1" rowspan="1"><p>Automatically email quote to customer</p>
</td><td colspan="1" rowspan="1"><p>The name of the issue.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>General</p>
</td><td colspan="1" rowspan="1"><p>Type</p>
</td><td colspan="1" rowspan="1"><p>Feature</p>
</td><td colspan="1" rowspan="1"><p>Either ‘Feature&#39; or ‘Bug&#39;.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>General</p>
</td><td colspan="1" rowspan="1"><p>Description</p>
</td><td colspan="1" rowspan="1"><p>Automatically emails a quote to the customer when made active.</p>
</td><td colspan="1" rowspan="1"><p>A longer description for the issue.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Azure DevOps</p>
</td><td colspan="1" rowspan="1"><p>Work Item ID</p>
</td><td colspan="1" rowspan="1"><p>10001</p>
</td><td colspan="1" rowspan="1"><p>Used to link the commit to the correct Work Item in Azure DevOps</p>
</td></tr>
</table>
<ol type="1" start="4">
<li>Click ‘Save&#39;</li>
</ol>
<p class="image-container"><img alt="issue.png" src="img/c93b4f6f254a0a9a.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Develop the solution to the issue, make a change" duration="0">
        <p>In order to develop a solution to the Issue we created an unmanaged development solution is required. The unmanaged solution will be named using the name of the Issue.</p>
<ol type="1">
<li>Clicking the ‘Develop&#39; button in the command ribbon will trigger the creation of the unmanaged solution and set the status of the Issue to ‘In Progress&#39;. <img alt="issue.png" src="img/49cc4e099d335f97.png"></li>
<li>Open the <a href="https://make.powerapps.com/" target="_blank">Power Platform Maker Portal</a> and select the environment which Development Hub is installed. To change environment you select the Environment dropdown in the top right corner of the portal. <img alt="issue.png" src="img/81ad609f3ebec4f2.png"></li>
<li>Select ‘Solutions&#39; from the navigation panel on the left side of the portal. This will display all the solutions installed into the environment. You will see a solution with a display name that matches the name given to the issue you created earlier. Clicking the display name will open the solution which will be empty. <img alt="issue.png" src="img/c1b196a8af8689bc.png"></li>
<li>This is where you can add new and existing artifacts to your solution and make changes needed to resolve the Issue. <img alt="issue.png" src="img/b91a7e7e703dd007.png"></li>
</ol>
<h2 is-upgraded>Example - Add a new table</h2>
<ol type="1">
<li>To add a new table, select the <strong>+ New</strong> button in the toolbar and select <strong>Table</strong> from the dropdown list. <img alt="issue.png" src="img/7861e6a4ff5baa6d.png"></li>
<li>This opens a pane on the right side of the portal where you can define the properties of the new table. <img alt="issue.png" src="img/20d325adb35d8f65.png"></li>
<li>Once the table is created you will see a list of the standard Dataverse columns. You can now add further customisations to the table.</li>
</ol>
<h2 is-upgraded>Recommended steps to complete before requesting a merge</h2>
<ol type="1">
<li>Run any potentially impacted tests locally against the development environment. This allows early identification of any issues that may have been introduced and is the optimum time to find and resolve issues.</li>
<li>If you are making code changes, raising a draft pull request so team members can give feedback is useful. This means your code review takes place outside of the solution merge process. If the code review happens during the merge process and issues are found then this will block other solution merges until you PR is approved.</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Request a merge" duration="0">
        <p>To add your changes to the master solution and have them deployed into the other environments you need to create a <strong>Solution Merge</strong>.</p>
<ol type="1">
<li>Open the <strong>Development Hub</strong> app, and navigate to the Issue. Select the <strong>Development</strong> tab where you will see a view called <strong>Solution Merges</strong>. Click <strong>+ New Solution Merge</strong><img alt="issue.png" src="img/20fe21f368cbf135.png"></li>
<li>The <strong>Quick Create: Solution Merge</strong> pane will be displayed on the right side of the portal.</li>
</ol>
<p class="image-container"><img alt="issue.png" src="img/81e7fded253bb361.png"></p>
<table>
<tr><td colspan="1" rowspan="1"><p>Field</p>
</td><td colspan="1" rowspan="1"><p>Example</p>
</td><td colspan="1" rowspan="1"><p>Explanation</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Issue</p>
</td><td colspan="1" rowspan="1"><p>Automatically email quote to customer</p>
</td><td colspan="1" rowspan="1"><p>Link to the related solution. This will already be populated.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Target Solution</p>
</td><td colspan="1" rowspan="1"><p>ALMLAB ALM_Core</p>
</td><td colspan="1" rowspan="1"><p>The solution to merge the changes into.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Manual Merge Activities</p>
</td><td colspan="1" rowspan="1"><p>No</p>
</td><td colspan="1" rowspan="1"><p>Enabling the Manual Merge Activities will cause the merging process to pause before extracting and committing to source control. This is useful where you are merging changes by hand (e.g. where you need to delete components from the solution or modify a component not included in the development solution).<br><br><em>The &#34;Performing a manual merge&#34; section will detail this process further.</em></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Source Branch</p>
</td><td colspan="1" rowspan="1"><p>Empty</p>
</td><td colspan="1" rowspan="1"><p>If the solution to be merged has associated source code (e.g. you have made changes to plugin assemblies, web resources, tests or deployment logic) then you must provide the branch to be merged in here. <br><br><em>If your repository uses a Push source control strategy, ensure that you perform any manual Git merging required on your source branch before creating the solution merge or you may get merge conflicts that prevent the solution merge being committed. It is recommended to use a Pull request strategy for this reason.</em></p>
</td></tr>
</table>
<ol type="1" start="3">
<li>You will now see a record in the <strong>Solution Merges</strong> view for the merge record you created. <img alt="issue.png" src="img/643d420301c0effb.png"></li>
<li>Select the record and click <strong>Edit</strong> or double click the row to open the <strong>Solution Merge</strong> form. You can now copy the URL and send it to someone to review and <strong>Approve</strong>.</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Approve the merge" duration="0">
        <p>To start the process of merging the developed changes into the master solution the <strong>Solution Merge</strong> record must be approved. On a project you would ask another team member to review your solution merge. When reviewing a merge some of the things to look out for are:</p>
<ul>
<li>Does the solution contain everything it would need to allow a merge to be successful. For example Dependencies, Plugin Steps etc.</li>
<li>Does the solution contain items that it does not need. For example when adding an existing <strong>Table</strong> to your solution, did all the components unexpectedly get included?</li>
</ul>
<ol type="1">
<li>Open the solution merge form and click <strong>Approve</strong> in the toolbar. This will change the <strong>Status Reason</strong> from <strong>Awaiting Review</strong> to <strong>Approved</strong><img alt="issue.png" src="img/f969c44b7bb9aad4.png"></li>
</ol>
<ul>
<li>If there are no solution merges in progress then the status reason will change to <strong>Merging</strong>. If another merge is in progress then it will be set to <strong>Queued</strong>. Queued solution merges will start as soon as the merges ahead of it have been complete.</li>
<li>If the solution merge fails for any reason the <strong>Status Reason</strong> will be set to <strong>Failed</strong>. Details of the error will be added to the <strong>Timeline</strong>.</li>
<li>Once a solution has been merged into master it is extracted into a branch with the same name as the <strong>Issue</strong> and A Pull Request is raised in Azure Devops with a link to the Work Item ID that was set on the Issue. The <strong>Status Reason</strong> of the solution merge is set to <strong>Awaiting PR Merge</strong>.</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Performing a manual merge" duration="0">
        <p>If Manual Merge has been enabled for the solution merge, then the merging process is paused to allow either the solution merge creator or approver to modify the target solution before it is extracted. This is useful for scenarios where the complete set of changes for a given issue couldn&#39;t be moved in an unmanaged solution.</p>
<p>A great example of such a change would be deleting a component since there is no mechanism within an unmanaged solution to delete a component in the target environment.</p>
<p>When the merging process is in a state where manual merge activities can begin, the solution merge will transition to an <strong>Awaiting Manual Merge Activities</strong> status and a Flow Approval is created for either the solution merge creator or approver to action.</p>
<p>After the manual activities are complete, follow these steps to resume the merging process.</p>
<ol type="1">
<li>Navigate to the Power Automate Maker Portal (e.g. https://unitedkingdom.flow.microsoft.com/)</li>
<li>Ensure you are in the correct environment (top right) <img alt="powerautomate-environment-selector.png" src="img/6b7d4781fb006830.png"></li>
<li>Select <strong>Action Items</strong> on the left then <strong>Approvals</strong><img alt="powerautomate-approvals-navigation.png" src="img/ef8df531a7641fb4.png"></li>
<li>Select the created request in the list of &#34;Received&#34; requests <img alt="powerautomate-approvals-list.png" src="img/2e2c530ed35efbd7.png"></li>
<li>Select <strong>Merged</strong> as the response then <strong>Confirm</strong> to the bottom <img alt="powerautomate-approvals-respond.png" src="img/37bc76e5e1705dca.png"></li>
<li>The merge will now resume by extracting the target solution from the master environment.</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Handling a merge failure" duration="0">
        <p>Not every merge will be successful and therefore an understanding of how to mitigate these proves valuable. This section will cover what Development Hub does to handle these and the steps required to retry the merge.</p>
<p>Merging your development solution from dev to master could fail for a few reasons although the most common are:</p>
<ul>
<li>missing solution dependencies</li>
<li>solution import timeout</li>
</ul>
<p>In this event, the solution merge will transition into a <strong>Failed</strong> status and a note will be added to a the timeline. If the development solution failed to import the note will include import error resembling this note:</p>
<p class="image-container"><img alt="solution-merge-import-note.png" src="img/d0b1811dee021799.png"></p>
<p>Otherwise, if any other error occurs, a more generic note is created which includes a link to the Cloud Flow run which you can use to diagnose the fault. To make the hyperlink clickable, use the expand toggle on the right of the note.</p>
<p class="image-container"><img alt="solution-merge-generic-note.png" src="img/d34bbb3d8fca04dc.png"></p>
<p>Once you believe the error to be resolved you can retry the solution merge using the retry button found in the ribbon of the solution merge.</p>
<p class="image-container"><img alt="solution-merge-retry-button.png" src="img/88e64c4b23c840f8.png"></p>
<p>Negative : Note that once the solution has begun merge it blocks all other solution merges until it is complete, including while it is <strong>Failed</strong>. This is because once the development solution is imported in the master environment, the environment is considered &#34;dirty&#34; until the changes are merged into source control. If another solution were to be imported and extracted, it would include the changes of the previous incomplete merge.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Pull Request" duration="0">
        <p>The customisations have now been extracted into the Git repository and a Pull Request has been created ready for review. To view the PR, open the Azure Devops (ADO) project, expand the <strong>Repos</strong> section of the navigation on the left of the portal and select <strong>Pull requests</strong>. Select the <strong>Active</strong> tab and you will see the PR related to your changes. Click on the PR to open up the details.</p>
<p class="image-container"><img alt="image.png" src="img/4d193fe455c82595.png"></p>
<p>The <strong>Overview</strong> tab contains the details of a PR such as required checks that must be completed before a PR can be completed, a list of required and optional reviewers and and comments that have been made. There is also a <strong>Work items</strong> section where you will see a link to the work item linked to the Dev Hub Issue.</p>
<p class="image-container"><img alt="image.png" src="img/2e4178cd00e662d7.png"></p>
<p>Select the <strong>Files</strong> tab to view all of the files that have been changed as part of this PR. This is where you can make comments against lines of code which the owner of the PR will be notified about.</p>
<p class="image-container"><img alt="image.png" src="img/38ed0aa16e8d8282.png"></p>
<h2 is-upgraded>Approving the PR</h2>
<ol type="1">
<li>When you have checked the changes you approve the PR using the <strong>Approve</strong> button at the top right of the page. <img alt="image.png" src="img/f6d20624fd14ef66.png"></li>
<li>Once all of the required checks have been successful you will be able to complete the PR using the <strong>Approve</strong> button. <img alt="image.png" src="img/fadc1084ffb82538.png"></li>
<li>You will then see a <strong>Complete pull request</strong> dialog where you can select merge type and post completion options. You do not need to change any of the default settings. Selecting <strong>Complete merge</strong> will merge the PR branch into the Master branch and start the process of releasing the changes to the CI environment.</li>
</ol>
<p class="image-container"><img alt="image.png" src="img/6e86cff7bcb6abc0.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Watch the process do it&#39;s magic" duration="0">
        <p>When a <strong>Solution Merge</strong> has been approved in Development Hub, a Power Automate Flow called <strong>When a solution merge is approved -&gt; Merge the solution</strong> is triggered which executes a series of tasks to create a Pull Request in ADO.</p>
<h2 is-upgraded>Overview</h2>
<p>The <strong>Issue Solution</strong> in the Development Hub environment is exported as an unmanaged solution and imported into the <strong>Master Environment</strong>. The contents of the <strong>Issue Solution</strong> are then merged into the <strong>Target Solution</strong> which is then Extracted from the <strong>Master Environment</strong>.</p>
<h2 is-upgraded>Extract the solution into a Feature Branch</h2>
<p>The extraction of the <strong>Target Solution</strong> is carried out by a pipeline in Azure Devops(ADO) which in the following example is called almlab.</p>
<ol type="1">
<li>Login to the ADO project that contains your Repository and Pipelines.</li>
<li>Navigate to the <strong>Pipelines</strong> tab and select the sub item also named <strong>Pipelines</strong> where you will see a list of recently run pipelines and the extract pipeline may still be running. <img alt="image.png" src="img/ef95cb49d06eb985.png"></li>
<li>Clicking on the almlab pipeline opens up a new view which displays the run history in start time order. <img alt="image.png" src="img/10951a230510e260.png"></li>
<li>Clicking on a run will open up its details, where you will see a <strong>Jobs</strong> section on the <strong>Summary</strong> tab. <img alt="image.png" src="img/1703bd07c5699e4a.png"></li>
<li>Clicking on the Job will show you the steps it contains and the result. This is useful when troubleshooting pipeline failures to complete successfully as you can find the task that failed and once selected you will see debug information in the right hand panel. <img alt="image.png" src="img/10deca8bfa38254d.png"></li>
</ol>
<p>At this point the change will either be committed directly to to the <code>master</code> branch if the source control strategy for the repository is <strong>Push</strong> or create a new pull request if the strategy is <strong>Pull Request</strong>.</p>
<h2 is-upgraded>Validate the Feature Branch</h2>
<p>Once the Extract pipeline (almlab) has successfully completed, the pipeline to build the solution is triggered.</p>
<p>This will build the solution to confirm it compiles with no issues and then run the  <a href="https://docs.microsoft.com/en-us/powerapps/maker/data-platform/use-powerapps-checker" target="_blank">Power Platform Solution Checker</a> to run a static analysis of the solution against a set of best practice rules and quickly identify any problematic patterns found.</p>
<ol type="1">
<li>Navigate to the <strong>Pipelines</strong> tab and select the sub item also named <strong>Pipelines</strong> where you will see a list of recently run pipelines. The build pipeline (ALMLAB - Package Build) will be listed. <img alt="image.png" src="img/fbeb803e0aa09e97.png"></li>
<li>Clicking on the <strong>ALMLAB - Package Build</strong> pipeline opens the run history for the pipeline in start time order. <img alt="image.png" src="img/e36f0724164c9c01.png"></li>
<li>Clicking on a run will open up the details. You will see a section with 2 tabs <strong>Stages</strong> and <strong>Jobs</strong>. You will see the <strong>Build</strong> stage which confirms the solution builds successfully and a <strong>Solution Checker</strong> stage which runs static code analysis against the solution components. <img alt="image.png" src="img/80340dc924d037c4.png"></li>
<li>Clicking on a stage will open up the Job details where you can see the breakdown of tasks for the stages. As with the Extract pipeline this is a great place to start when troubleshooting issues with the pipelines. <img alt="image.png" src="img/934335ba670b8092.png"></li>
</ol>
<h2 is-upgraded>Approve the Pull Request</h2>
<p>Once the PR has been approved the <strong>Feature</strong> branch will be merged into the <strong>Master</strong> branch of the source code.</p>
<p>The <strong>ALMLAB - Package Build</strong> pipeline with be run against the <strong>Master</strong> branch to confirm that the solution builds and the Solution Checker will analyse the solution components.</p>
<ol type="1">
<li>Navigate to the <strong>Pipelines</strong> tab and select the sub item also named <strong>Pipelines</strong> where you will see a list of recently run pipelines. The build pipeline (ALMLAB - Package Build) will be listed. <img alt="image.png" src="img/999d7c1590fe8774.png"></li>
<li>Clicking on the <strong>ALMLAB - Package Build</strong> pipeline opens the run history for the pipeline in start time order. <img alt="image.png" src="img/5c641e705587d3ef.png"></li>
<li>Clicking on a run will open up the details. You will see a section with 2 tabs <strong>Stages</strong> and <strong>Jobs</strong>. You will see the <strong>Build</strong> stage which confirms the solution builds successfully and a <strong>Solution Checker</strong> stage which runs static code analysis against the solution components. <img alt="image.png" src="img/6354e3882c4c76e4.png"></li>
<li>Clicking on a stage will open up the Job details where you can see the breakdown of tasks for the stages. <img alt="image.png" src="img/f8a23bc7a44cfbd4.png"></li>
</ol>
<h2 is-upgraded>Release to the CI Environment</h2>
<p>The solution contained in the <strong>Master</strong> branch is now deployed into the <strong>CI Environment</strong>. This is done using a <strong>Release</strong> pipeline in ADO.</p>
<ol type="1">
<li>Navigate to the <strong>Pipelines</strong> tab and select the sub item <strong>Releases</strong>. The examples show a release called <strong>ALMLAB Release</strong> on the left panel where you can search for pipelines if required.</li>
<li>Select the release <strong>ALMLAB Release</strong> and you will see a tab on the right hand side with a tab called releases which contains a list of the runs in order of start time. <img alt="image.png" src="img/f85594beba24964f.png"></li>
<li>Clicking a release run will display the <strong>Stages</strong> which the release runs. In this case you will see 1 stage which deploys the solution into the CI Environment. <img alt="image.png" src="img/c4b19e7f0ccc2ace.png"></li>
<li>If you select a Stage you will be given the option to <strong>view logs</strong>. This will show you a list of steps contained in the stage. Selecting a step will display the tasks with the log information. <img alt="image.png" src="img/113ec003d679af05.png"></li>
</ol>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
